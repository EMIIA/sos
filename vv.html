<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>AI WMS</title>

<!-- PWA -->
<link rel="shortcut icon" href="https://sos.emiia.ai/vv.ico" type="image/x-icon">
<meta name="theme-color" content="#f8f9fa">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="manifest" href="https://sos.emiia.ai/vv.webmanifest">

<!-- Эти теги для соцсетей, для PWA не важны, но должны быть корректны -->
<meta property="og:type" content="website" />
<meta property="og:url" content="https://sos.emiia.ai/vv.html" />
<meta property="og:title" content="AI WMS"/>
<meta property="og:image" content="https://sos.emiia.ai/vvjpg.jpg" />
<meta name="twitter:card" content="summary_large_image" />

<!-- Критически важная ссылка для PWA -->
<link rel="manifest" href="https://sos.emiia.ai/vv.webmanifest">

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
    /* Сброс стилей */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    /* Основные стили */
    body { 
        font-family: monospace; 
        margin: 0; 
        padding: 0;
        min-height: 100vh;
        display: flex; 
        justify-content: center; 
        align-items: center; 
        background: #F8F9FA;
        /* Безопасные отступы для iOS */
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
    }
    
    .main-container {
        width: 100%;
        max-width: 100%;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }
    
    .auth-container { 
        background: white; 
        padding: 2rem; 
        border-radius: 16px; 
        box-shadow: 0 8px 30px rgba(0,0,0,0.12); 
        width: 100%;
        max-width: 400px;
        margin: 0 auto;
        font-family: monospace;
    }
    
    h2 { 
        color: #da4216; 
        margin: 0 0 1.5rem 0; 
        text-align: center; 
        font-size: 1.8rem; 
        font-family: monospace; 
    }
    
    .input-group { 
        margin-bottom: 1.2rem; 
        font-family: monospace; 
    }
    
    input { 
        width: 100%; 
        padding: 14px; 
        border: 2px solid #e0e0e0; 
        border-radius: 8px; 
        font-size: 1rem; 
        transition: border-color 0.3s ease; 
        box-sizing: border-box; 
        font-family: monospace; 
        letter-spacing: 2px;
    }
    
    input:focus { 
        outline: none; 
        border-color: #b2b4b3; 
        box-shadow: 0 0 0 3px rgba(52,152,219,0.1); 
    }
    
    button { 
        width: 100%; 
        padding: 14px; 
        background: #2dbe64; 
        color: white; 
        border: none; 
        border-radius: 8px; 
        font-size: 1rem; 
        font-weight: 600; 
        cursor: pointer; 
        transition: background 0.3s ease; 
        font-family: monospace; 
        margin-top: 0.5rem;
    }
    
    button:hover { 
        background: #1ac95c; 
    }
    
    .text-primary {
        color: #b2b4b3;
        text-decoration: none;
    }
    
    .text-primary1 {
        text-decoration: none;
        text-align: center;
        display: block;
    }

    .beta {
        font-size: 0.4em;
    }

    /* Мобильные стили */
    @media (max-width: 768px) {
        .main-container {
            padding: 15px;
            align-items: flex-start;
            padding-top: max(20px, env(safe-area-inset-top));
        }
        
        .auth-container {
            padding: 1.5rem;
            margin: 0;
            max-width: 100%;
            width: 100%;
        }
        
        h2 {
            font-size: 1.5rem;
            margin-bottom: 1.2rem;
        }
        
        input {
            letter-spacing: 4.5px;
            font-size: 16px; /* Предотвращает зум в iOS */
        }
        
        /* Фикс для iOS при фокусе */
        .auth-container {
            transform: translateZ(0);
        }
    }

    /* Очень маленькие экраны */
    @media (max-height: 600px) {
        .main-container {
            align-items: flex-start;
            padding-top: 10px;
        }
        
        .auth-container {
            padding: 1.2rem;
        }
    }

    /* Десктоп */
    @media (min-width: 1024px) {
        body {
            min-height: 100vh;
            overflow: hidden;
        }
        
        .main-container {
            min-height: 100vh;
        }
    }

    /* Предотвращение скачков при фокусе на iOS */
    @media (max-width: 768px) {
        input, textarea {
            font-size: 16px !important;
        }
    }
</style>

</head>

<script type="text/javascript">
    (function () {
      const tele = window.Telegram.WebApp;
      tele.ready()
      tele.expand();
     
      tele.SettingsButton.show();
      tele.setHeaderColor("#f8f9fa")
      tele.setBackgroundColor("#f8f9fa")
      tele.enableClosingConfirmation()
      tele.disableVerticalSwipes()
    })()
</script>

<body>
    <div class="main-container">
        <div class="auth-container">
            <div class="header-wrapper">
                <h2>
                    <a class="text-primary1" style="color: #da4216; text-align: center; font-weight: 600;" href="https://www.emiia.ru/">
                        <!-- Ваш SVG -->
                        





<svg version="1.1" viewBox="0.0 0.0 230.0 90.0" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><clipPath id="p.0"><path d="m0 0l230.0 0l0 90.0l-230.0 0l0 -90.0z" clip-rule="nonzero"/></clipPath><g clip-path="url(#p.0)"><path fill="#000000" fill-opacity="0.0" d="m0 0l230.0 0l0 90.0l-230.0 0z" fill-rule="evenodd"/><path fill="#000000" fill-opacity="0.0" d="m-0.007874016 23.002132l230.01575 0l0 66.267715l-230.01575 0z" fill-rule="evenodd"/><path fill="#2dbe64" d="m10.5702505 58.24213l0 -19.671875l15.859376 0q1.03125 0 1.90625 0.515625q0.875 0.515625 1.390625 1.375q0.53125 0.859375 0.53125 1.90625l0 12.078125q0 1.03125 -0.53125 1.90625q-0.515625 0.859375 -1.390625 1.375q-0.875 0.515625 -1.90625 0.515625l-15.859376 0zm3.921875 -3.640625l11.765626 0q0.140625 0 0.25 -0.09375q0.109375 -0.09375 0.109375 -0.234375l0 -11.75q0 -0.125 -0.109375 -0.21875q-0.109375 -0.109375 -0.25 -0.109375l-11.765626 0q-0.140625 0 -0.234375 0.109375q-0.09375 0.09375 -0.09375 0.21875l0 11.75q0 0.140625 0.09375 0.234375q0.09375 0.09375 0.234375 0.09375zm18.86969 3.640625l0 -15.875q0 -1.046875 0.515625 -1.90625q0.53125 -0.859375 1.390625 -1.375q0.859375 -0.515625 1.90625 -0.515625l12.046875 0q1.03125 0 1.90625 0.515625q0.875 0.515625 1.390625 1.375q0.53125 0.859375 0.53125 1.90625l0 15.875l-3.640625 0l0 -6.609375l-12.4375 0l0 6.609375l-3.609375 0l0 0zm3.609375 -10.21875l12.4375 0l0 -5.5q0 -0.125 -0.109375 -0.21875q-0.109375 -0.109375 -0.25 -0.109375l-11.75 0q-0.125 0 -0.234375 0.109375q-0.09375 0.09375 -0.09375 0.21875l0 5.5l0 0zm34.877472 10.21875l-5.9375 -7.078125l4.734375 0l5.140625 6.0625l0 1.015625l-3.9375 0zm-15.6875 0l0 -19.65625l15.84375 0q1.046875 0 1.921875 0.53125q0.875 0.515625 1.390625 1.375q0.515625 0.859375 0.515625 1.90625l0 5.296875q0 1.03125 -0.515625 1.90625q-0.515625 0.875 -1.390625 1.390625q-0.875 0.5 -1.921875 0.5l-12.234375 0.03125l0 6.71875l-3.609375 0zm3.9375 -10.390625l11.75 0q0.140625 0 0.25 -0.078125q0.109375 -0.078125 0.109375 -0.21875l0 -5.03125q0 -0.125 -0.109375 -0.21875q-0.109375 -0.109375 -0.25 -0.109375l-11.75 0q-0.140625 0 -0.234375 0.109375q-0.09375 0.09375 -0.09375 0.21875l0 5.03125q0 0.140625 0.09375 0.21875q0.09375 0.078125 0.234375 0.078125zm18.639359 10.390625l0 -19.671875l3.625 0l0 8.0l4.625 0l6.71875 -8.0l3.9375 0l0 1.03125l-7.375 8.796875l7.40625 8.8125l0 1.03125l-3.96875 0l-6.71875 -8.0l-4.625 0l0 8.0l-3.625 0zm33.83029 0q-1.046875 0 -1.90625 -0.515625q-0.859375 -0.515625 -1.375 -1.375q-0.515625 -0.875 -0.515625 -1.90625l0 -1.5l3.609375 0l0 1.328125q0 0.140625 0.09375 0.234375q0.09375 0.09375 0.234375 0.09375l11.765625 0q0.140625 0 0.234375 -0.09375q0.09375 -0.09375 0.09375 -0.234375l0 -3.734375q0 -0.140625 -0.09375 -0.21875q-0.09375 -0.078125 -0.234375 -0.078125l-11.90625 0q-1.046875 0 -1.90625 -0.515625q-0.859375 -0.53125 -1.375 -1.390625q-0.515625 -0.859375 -0.515625 -1.921875l0 -4.046875q0 -1.046875 0.515625 -1.90625q0.515625 -0.859375 1.375 -1.375q0.859375 -0.515625 1.90625 -0.515625l12.078125 0q1.03125 0 1.890625 0.515625q0.875 0.515625 1.390625 1.375q0.515625 0.859375 0.515625 1.90625l0 1.5l-3.640625 0l0 -1.34375q0 -0.125 -0.09375 -0.21875q-0.09375 -0.109375 -0.234375 -0.109375l-11.765625 0q-0.140625 0 -0.234375 0.109375q-0.09375 0.09375 -0.09375 0.21875l0 3.75q0 0.140625 0.09375 0.21875q0.09375 0.078125 0.234375 0.078125l11.9375 0q1.03125 0 1.890625 0.53125q0.875 0.515625 1.390625 1.375q0.515625 0.859375 0.515625 1.921875l0 4.046875q0 1.03125 -0.515625 1.90625q-0.515625 0.859375 -1.390625 1.375q-0.859375 0.515625 -1.890625 0.515625l-12.078125 0zm25.901062 0l0 0l0 -16.046875l-8.03125 0l0 -3.625l19.671875 0l0 3.625l-8.0 0l0 16.046875l-3.640625 0zm17.445084 0q-1.046875 0 -1.90625 -0.515625q-0.859375 -0.515625 -1.390625 -1.375q-0.515625 -0.875 -0.515625 -1.90625l0 -12.078125q0 -1.046875 0.515625 -1.90625q0.53125 -0.859375 1.390625 -1.375q0.859375 -0.515625 1.90625 -0.515625l12.078125 0q1.03125 0 1.890625 0.515625q0.859375 0.515625 1.375 1.375q0.53125 0.859375 0.53125 1.90625l0 12.078125q0 1.03125 -0.53125 1.90625q-0.515625 0.859375 -1.375 1.375q-0.859375 0.515625 -1.890625 0.515625l-12.078125 0zm0.125 -3.640625l11.75 0q0.140625 0 0.25 -0.09375q0.109375 -0.09375 0.109375 -0.234375l0 -11.75q0 -0.125 -0.109375 -0.21875q-0.109375 -0.109375 -0.25 -0.109375l-11.75 0q-0.125 0 -0.234375 0.109375q-0.09375 0.09375 -0.09375 0.21875l0 11.75q0 0.140625 0.09375 0.234375q0.109375 0.09375 0.234375 0.09375zm34.440094 3.640625l-5.9375 -7.078125l4.734375 0l5.140625 6.0625l0 1.015625l-3.9375 0zm-15.6875 0l0 -19.65625l15.84375 0q1.046875 0 1.921875 0.53125q0.875 0.515625 1.390625 1.375q0.515625 0.859375 0.515625 1.90625l0 5.296875q0 1.03125 -0.515625 1.90625q-0.515625 0.875 -1.390625 1.390625q-0.875 0.5 -1.921875 0.5l-12.234375 0.03125l0 6.71875l-3.609375 0zm3.9375 -10.390625l11.75 0q0.140625 0 0.25 -0.078125q0.109375 -0.078125 0.109375 -0.21875l0 -5.03125q0 -0.125 -0.109375 -0.21875q-0.109375 -0.109375 -0.25 -0.109375l-11.75 0q-0.140625 0 -0.234375 0.109375q-0.09375 0.09375 -0.09375 0.21875l0 5.03125q0 0.140625 0.09375 0.21875q0.09375 0.078125 0.234375 0.078125zm18.654984 10.390625l0 -19.671875l18.125 0l0 3.625l-14.484375 0l0 4.375l11.640625 0l0 3.671875l-11.640625 0l0 4.359375l14.484375 0l0 3.640625l-18.125 0z" fill-rule="nonzero"/><path fill="#2dbe64" d="m132.04828 75.68212l0 -8.15625l7.515625 0l0 1.5l-6.015625 0l0 1.8125l4.828125 0l0 1.53125l-4.828125 0l0 1.8125l6.015625 0l0 1.5l-7.515625 0zm8.41246 0l0 -8.15625l1.640625 0l2.953125 3.515625l2.9375 -3.515625l1.65625 0l0 8.15625l-1.5 0l0 -5.984375l-3.09375 3.6875l-3.109375 -3.671875l0 5.96875l-1.484375 0zm10.3407135 0l0 -8.15625l1.484375 0l0 8.15625l-1.484375 0zm2.42424 0l0 -8.15625l1.484375 0l0 8.15625l-1.484375 0zm2.61174 0l0 -6.578125q0 -0.4375 0.21875 -0.78125q0.21875 -0.359375 0.5625 -0.578125q0.359375 -0.21875 0.796875 -0.21875l5.0 0q0.421875 0 0.78125 0.21875q0.375 0.21875 0.578125 0.578125q0.21875 0.34375 0.21875 0.78125l0 6.578125l-1.5 0l0 -2.734375l-5.15625 0l0 2.734375l-1.5 0l0 0zm1.5 -4.234375l5.15625 0l0 -2.28125q0 -0.0625 -0.046875 -0.09375q-0.046875 -0.046875 -0.109375 -0.046875l-4.875 0q-0.046875 0 -0.09375 0.046875q-0.03125 0.03125 -0.03125 0.09375l0 2.28125l0 0zm7.923523 4.234375l0 0l0 -1.484375l1.484375 0l0 1.484375l-1.484375 0zm2.6183777 0l0 -6.578125q0 -0.4375 0.21875 -0.78125q0.21875 -0.359375 0.5625 -0.578125q0.359375 -0.21875 0.796875 -0.21875l5.0 0q0.421875 0 0.78125 0.21875q0.375 0.21875 0.578125 0.578125q0.21875 0.34375 0.21875 0.78125l0 6.578125l-1.5 0l0 -2.734375l-5.15625 0l0 2.734375l-1.5 0l0 0zm1.5 -4.234375l5.15625 0l0 -2.28125q0 -0.0625 -0.046875 -0.09375q-0.046875 -0.046875 -0.109375 -0.046875l-4.875 0q-0.046875 0 -0.09375 0.046875q-0.03125 0.03125 -0.03125 0.09375l0 2.28125l0 0zm7.782898 4.234375l0 -8.15625l1.484375 0l0 8.15625l-1.484375 0zm8.781296 0l0 0l-2.96875 -8.15625l1.59375 0l1.96875 5.375l1.96875 -5.375l1.46875 0l1.96875 5.375l1.953125 -5.375l1.609375 0l-2.96875 8.15625l-1.1875 0l-2.109375 -5.78125l-2.109375 5.78125l-1.1875 0zm10.637222 0l0 -8.15625l1.640625 0l2.953125 3.515625l2.9375 -3.515625l1.65625 0l0 8.15625l-1.5 0l0 -5.984375l-3.09375 3.6875l-3.109375 -3.671875l0 5.96875l-1.484375 0zm12.0438385 0q-0.421875 0 -0.78125 -0.21875q-0.359375 -0.21875 -0.578125 -0.5625q-0.21875 -0.359375 -0.21875 -0.796875l0 -0.625l1.5 0l0 0.5625q0 0.046875 0.03125 0.09375q0.046875 0.046875 0.109375 0.046875l4.875 0q0.0625 0 0.09375 -0.046875q0.046875 -0.046875 0.046875 -0.09375l0 -1.546875q0 -0.0625 -0.046875 -0.09375q-0.03125 -0.03125 -0.09375 -0.03125l-4.9375 0q-0.421875 0 -0.78125 -0.21875q-0.359375 -0.21875 -0.578125 -0.578125q-0.21875 -0.359375 -0.21875 -0.796875l0 -1.671875q0 -0.4375 0.21875 -0.78125q0.21875 -0.359375 0.578125 -0.578125q0.359375 -0.21875 0.78125 -0.21875l5.015625 0q0.421875 0 0.78125 0.21875q0.359375 0.21875 0.5625 0.578125q0.21875 0.34375 0.21875 0.78125l0 0.625l-1.5 0l0 -0.5625q0 -0.0625 -0.046875 -0.09375q-0.03125 -0.046875 -0.09375 -0.046875l-4.875 0q-0.0625 0 -0.109375 0.046875q-0.03125 0.03125 -0.03125 0.09375l0 1.546875q0 0.0625 0.03125 0.09375q0.046875 0.03125 0.109375 0.03125l4.953125 0q0.421875 0 0.78125 0.21875q0.359375 0.21875 0.5625 0.578125q0.21875 0.359375 0.21875 0.796875l0 1.671875q0 0.4375 -0.21875 0.796875q-0.203125 0.34375 -0.5625 0.5625q-0.359375 0.21875 -0.78125 0.21875l-5.015625 0z" fill-rule="nonzero"/></g></svg>
                    </a>
                </h2>
            </div>

            <div id="update-info"></div>

            <form id="auth-form" onsubmit="auth(); return false;">
                <div class="input-group">
                    <input type="text" id="login" name="username" placeholder="Email address" autocomplete="username" required>
                </div>
                <div class="input-group">
                    <input type="password" id="password" name="password" placeholder="Password" autocomplete="current-password" required>
                </div>
                <p class="small"><a class="text-primary" href="mailto:emiia@emiia.ai">Забыли пароль?</a></p>
                <button type="submit">ВХОД ❯</button>
            </form>
            <p style="margin-top: 1rem;">Нет аккаунта? <a class="text-primary" href="mailto:emiia@emiia.ai"> Зарегистрироваться </a></p>
            <br />
            
            <div style="text-align: center;">
                <a class="text-primary1" href="https://www.emiia.ru/" style="color: #da4216; font-weight: 600;">
                    <span style="color: #b2b4b3; font-size: 1.0rem; font-weight: 500;">ЭВОЛЮЦИЯ ЛОГИСТИКИ</span>
                    <span style="font-size: 1.0rem; font-weight: 600; vertical-align: middle; color: #1ac95c;">• ❯</span>
                </a>
            </div>
        </div>
    </div>

    <script>
    // Загрузка сохранённых данных из localStorage
    window.onload = function() {
        const savedLogin = localStorage.getItem('savedLogin');
        const savedPassword = localStorage.getItem('savedPassword');
        if (savedLogin) document.getElementById('login').value = savedLogin;
        if (savedPassword) document.getElementById('password').value = savedPassword;
    };

    async function auth() {
        const login = document.getElementById('login').value;
        const password = document.getElementById('password').value;
        
        const response = await fetch('https://script.google.com/macros/s/AKfycbxOGWk-UgU-UO-TByGvusunKeJmhGV--Wmstne1TKlDW1Oq7QZAeR3zEBHhwHAOuA0P/exec', {
            method: 'POST',
            body: new URLSearchParams({ login, password })
        });
        
        if (await response.text() === 'OK') {
            localStorage.setItem('savedLogin', login);
            localStorage.setItem('savedPassword', password);
            window.location.href = 'https://sos.emiia.ai/vv1.html?pwa=true';
        } else {
            alert('Неверные учетные данные!');
        }
    }

    // Фикс для iOS - предотвращение скачков
    document.addEventListener('DOMContentLoaded', function() {
        let visualViewport = window.visualViewport;
        if (visualViewport) {
            visualViewport.addEventListener('resize', function() {
                window.scrollTo(0, 0);
            });
        }
    });
    </script>
</body>
</html>
