

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>–ü–†–û–°–¢–†–ê–ù–°–¢–í–ï–ù–ù–´–ô –ò–ù–¢–ï–õ–õ–ï–ö–¢</title>

<!-- PWA -->
<link rel="shortcut icon" href="/vv.ico" type="image/x-icon">
<meta name="theme-color" content="#f8f9fa">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="manifest" href="/vv.webmanifest">

<!-- –°–æ—Ü—Å–µ—Ç–∏ -->
<meta property="og:type" content="website" />
<meta property="og:url" content="/vv.html" />
<meta property="og:title" content="AI WMS"/>
<meta property="og:image" content="/vvjpg.jpg" />
<meta name="twitter:card" content="summary_large_image" />

<!-- –ü–†–ï–î–ó–ê–ì–†–£–ó–ö–ê -->
<link rel="preload" href="/telegram-web-app.js" as="script">
<link rel="preload" href="/logo.svg" as="image">

<!-- –í–°–ï –°–¢–ò–õ–ò –í –û–î–ù–û–ú –§–ê–ô–õ–ï -->
<style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:monospace;margin:0;padding:0;min-height:100vh;display:flex;justify-content:center;align-items:center;background:#F8F9FA;padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}
    .main-container{width:100%;max-width:100%;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px}
    .auth-container{background:white;padding:2rem;border-radius:16px;box-shadow:0 8px 30px rgba(0,0,0,0.12);width:100%;max-width:400px;margin:0 auto;font-family:monospace}
    h2{color:#da4216;margin:0 0 1.5rem 0;text-align:center;font-size:1.8rem;font-family:monospace}
    .input-group{margin-bottom:1.2rem;font-family:monospace}
    input{width:100%;padding:14px;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem;transition:border-color .3s ease;box-sizing:border-box;font-family:monospace;letter-spacing:2px}
    input:focus{outline:none;border-color:#6d9eeb;box-shadow:0 0 0 3px rgba(52,152,219,.1)}
    button{width:100%;padding:14px;background:#6d9eeb;color:white;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .3s ease;font-family:monospace;margin-top:.5rem}
    button:hover{background:#3c78d8}
    .text-primary{color:#6d9eeb;text-decoration:none}
    .text-primary1{text-decoration:none;text-align:center;display:block}
    .beta{font-size:.4em}
    img{max-width:100%;height:auto}
    p.small{font-size:.8rem}
    
    @media (max-width:768px){
        .main-container{padding:15px;align-items:flex-start;padding-top:max(20px,env(safe-area-inset-top))}
        .auth-container{padding:1.5rem;margin:0;max-width:100%;width:100%}
        h2{font-size:1.5rem;margin-bottom:1.2rem}
        input{letter-spacing:4.5px;font-size:16px}
        .auth-container{transform:translateZ(0)}
    }
    @media (max-height:600px){
        .main-container{align-items:flex-start;padding-top:10px}
        .auth-container{padding:1.2rem}
    }
    @media (min-width:1024px){
        body{min-height:100vh;overflow:hidden}
        .main-container{min-height:100vh}
    }
</style>






<style>
    /* –§–ò–ö–° –ß–ï–†–ù–û–ì–û –§–õ–≠–®–ê */
    html { background-color: #F8F9FA; }
    body { background-color: #F8F9FA; }
    
    /* –í—Å–µ –≤–∞—à–∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏... */
    *{margin:0;padding:0;box-sizing:border-box}
    /* ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ -->
</style>



</head>
<body>






<!-- üé≠ –í–°–ü–õ–´–í–ê–Æ–©–ï–ï –û–ö–ù–û -->
<div id="push-modal" style="
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  z-index: 9999;
  justify-content: center;
  align-items: center;
">
  <div style="
    background: white;
    padding: 2rem;
    border-radius: 16px;
    text-align: center;
    max-width: 90%;
    box-shadow: 0 8px 30px rgba(0,0,0,0.3);
  ">
    <h3 style="margin: 0 0 1rem 0; color: #da4216;">üîî –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø</h3>
    <p style="margin: 0 0 1.5rem 0; color: #333;">
      –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç EMIIA.AI
    </p>
    <button id="subscribe-push-btn" style="
      padding: 14px 32px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
    ">–ü–û–õ–£–ß–ê–¢–¨ –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø</button>
    <button onclick="hidePushModal()" style="
      margin-left: 1rem;
      padding: 14px 24px;
      background: #6c757d;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
    ">–û–¢–ú–ï–ù–ê</button>
  </div>
</div>







    <div class="main-container">
        <div class="auth-container">
            <div class="header-wrapper">
                <h2>
                    <a class="text-primary1" href="https://www.emiia.ru/">                    

<img src="/logo_wms.svg" alt="AI WMS" width="230" height="75" loading="eager">


                    </a>
                </h2>
            </div>

            <div id="update-info"></div>

            <form id="auth-form">
                <div class="input-group">
                    <input type="text" id="login" name="username" placeholder="Email address" autocomplete="username" required>
                </div>
                <div class="input-group">
                    <input type="password" id="password" name="password" placeholder="Password" autocomplete="current-password" required>
                </div>
                <p class="small"><a class="text-primary" href="mailto:emiia@emiia.ai">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a></p>

                <button type="submit">–í–û–ô–¢–ò <span>‚ùØ</span></button>
            </form>

            <p style="margin-top:1rem">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a class="text-primary" href="mailto:emiia@emiia.ai">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
            
            <!-- –í–ï–†–ù–£–¢–ê–Ø –°–°–´–õ–ö–ê -->
            <div style="text-align:center;margin-top:2rem">
                <a class="text-primary1" href="https://www.emiia.ru/" style="color:#da4216;font-weight:600;text-decoration:none">
                    <span style="color:#b2b4b3;font-size:1rem;font-weight:500">–ü–†–û–°–¢–†–ê–ù–°–¢–í–ï–ù–ù–´–ô –ò–ù–¢–ï–õ–õ–ï–ö–¢</span>
                    <span style="font-size:1rem;font-weight:600;color:#3c78d8;margin-left:2px"> ‚Ä¢ ‚ùØ</span>
                </a>
            </div>
        </div>
    </div>

    <!-- –û–¢–õ–û–ñ–ï–ù–ù–´–ï –°–ö–†–ò–ü–¢–´ -->
    <script src="/telegram-web-app.js" async></script>
    
    <script>
    window.addEventListener('load', () => {
        if (window.Telegram?.WebApp) {
            const tele = window.Telegram.WebApp;
            tele.ready();
            tele.expand();
            tele.SettingsButton.show();
            tele.setHeaderColor("#f8f9fa");
            tele.setBackgroundColor("#f8f9fa");
            tele.enableClosingConfirmation();
            tele.disableVerticalSwipes();
        }
    });

    document.getElementById('auth-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const login = document.getElementById('login').value;
        const password = document.getElementById('password').value;
        
        try {
            const response = await fetch('https://script.google.com/macros/s/AKfycbxOGWk-UgU-UO-TByGvusunKeJmhGV--Wmstne1TKlDW1Oq7QZAeR3zEBHhwHAOuA0P/exec', {
                method: 'POST',
                body: new URLSearchParams({ login, password })
            });
            
            if (await response.text() === 'OK') {
                localStorage.setItem('savedLogin', login);
                localStorage.setItem('savedPassword', password);
                window.location.href = 'https://sos.emiia.ai/vv1.html?pwa=true';
            } else {
                alert('–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!');
            }
        } catch {
            alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è');
        }
    });

    window.addEventListener('DOMContentLoaded', () => {
        const savedLogin = localStorage.getItem('savedLogin');
        const savedPassword = localStorage.getItem('savedPassword');
        if (savedLogin) document.getElementById('login').value = savedLogin;
        if (savedPassword) document.getElementById('password').value = savedPassword;
    });
    </script>















<script>
// ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz0wJrj3cyVhdLZrCtw3u0eO5nqklpEs-lc4vkvyz2hb2KdwfPilqyCYJLXH_sEAKVi/exec';
const VAPID_PUBLIC_KEY = 'BD09P5I2226LhoIjSPu2uGD81R8lFyte0w6jE2EMUkCW1I0LZC9PYPSkPZxSp0zYyX5zUgUVkRMZHFyCaRYgTkQ';

// üîî –§–£–ù–ö–¶–ò–Ø –ü–û–î–ü–ò–°–ö–ò
async function subscribeToPush() {
  if (!('serviceWorker' in navigator) || !('PushManager' in window)) {
    alert('‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è');
    return false;
  }

  try {
    const registration = await navigator.serviceWorker.register('/sw.js');
    await navigator.serviceWorker.ready;
    
    const permission = await Notification.requestPermission();
    if (permission !== 'granted') {
      alert('‚ùå –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ');
      return false;
    }
    
    const subscription = await registration.pushManager.subscribe({
      userVisibleOnly: true,
      applicationServerKey: urlBase64ToUint8Array(VAPID_PUBLIC_KEY)
    });
    
    await fetch(APPS_SCRIPT_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        action: 'saveSubscription',
        user: localStorage.getItem('savedLogin') || 'anonymous',
        subscription: JSON.stringify(subscription)
      })
    });
    
    return true;
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞:', error);
    alert('–û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏: ' + error.message);
    return false;
  }
}

// üé≠ –û–ö–ù–û
function showPushModal() {
  const modal = document.getElementById('push-modal');
  if (modal) modal.style.display = 'flex';
}

function hidePushModal() {
  const modal = document.getElementById('push-modal');
  if (modal) modal.style.display = 'none';
}

// üîê –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø
document.getElementById('auth-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  const login = document.getElementById('login').value;
  const password = document.getElementById('password').value;
  
  try {
    const response = await fetch('https://script.google.com/macros/s/AKfycbz0wJrj3cyVhdLZrCtw3u0eO5nqklpEs-lc4vkvyz2hb2KdwfPilqyCYJLXH_sEAKVi/exec', {
      method: 'POST',
      body: new URLSearchParams({ login, password })
    });
    
    if (await response.text() === 'OK') {
      localStorage.setItem('savedLogin', login);
      showPushModal(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ
    } else {
      alert('–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!');
    }
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
    alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è');
  }
});

// üéØ –ö–ù–û–ü–ö–ê –ü–û–î–ü–ò–°–ö–ò
document.getElementById('subscribe-push-btn').addEventListener('click', async (e) => {
  e.preventDefault();
  const btn = e.target;
  btn.disabled = true;
  btn.textContent = '–û–∂–∏–¥–∞–π—Ç–µ...';
  
  const success = await subscribeToPush();
  
  if (success) {
    alert('‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–∞!');
    hidePushModal();
    window.location.href = 'https://sos.emiia.ai/vv1.html?pwa=true';
  } else {
    btn.disabled = false;
    btn.textContent = '–ü–û–õ–£–ß–ê–¢–¨ –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø';
  }
});

// üîÑ –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø
function urlBase64ToUint8Array(base64String) {
  const padding = '='.repeat((4 - base64String.length % 4) % 4);
  const base64 = (base64String + padding).replace(/\-/g, '+').replace(/_/g, '/');
  const rawData = window.atob(base64);
  const outputArray = new Uint8Array(rawData.length);
  for (let i = 0; i < rawData.length; ++i) {
    outputArray[i] = rawData.charCodeAt(i);
  }
  return outputArray;
}

// –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
window.addEventListener('DOMContentLoaded', () => {
  const savedLogin = localStorage.getItem('savedLogin');
  if (savedLogin) {
    document.getElementById('login').value = savedLogin;
  }
});
</script>





</body>
</html>





