
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EMIIA.AI ERP</title>


<script src="https://telegram.org/js/telegram-web-app.js"></script>




    <style>
        body { font-family: monospace; margin: 0; min-height: 100vh; display: flex; justify-content: center; align-items: center; background: #F8F9FA; }
        .auth-container { background: white; padding: 2.5rem; border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,0.12); width: 100%; max-width: 400px; margin: 1rem; font-family: monospace; }
        h2 { color: #3d85c6; margin: 0 0 2rem 0; text-align: center; font-size: 1.8rem; font-family: monospace; }
        .input-group { margin-bottom: 1.5rem; font-family: monospace; }
        input { width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease; box-sizing: border-box; font-family: monospace; }
        input:focus { outline: none; border-color: #3498db; box-shadow: 0 0 0 3px rgba(52,152,219,0.1); }
        button { width: 100%; padding: 14px; background: #3d85c6; color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: background 0.3s ease; font-family: monospace; }
        button:hover { background: #2980b9; }
        @media (max-width: 480px) { .auth-container { padding: 1.5rem; margin: 0.5rem; } h2 { font-size: 1.5rem; } }
    </style>











<style>

/* Базовый стиль для десктопа */
input {
  letter-spacing: 2px !important;
}

/* Стили для мобильных устройств */
@media (max-width: 768px) {
  input{
    letter-spacing: 4.5px !important; /* Уменьшаем интервал на мобильных */
  }
}

</style>








<style>
.beta {
    font-size: 0.4em; /* Уменьшаем до 70% от размера h1 */
}
</style>








<style>
.icons-container {
    display: flex;
    justify-content: space-between; / Равномерное распределение /
    width: 100%;
    max-width: 400px; / Совпадает с max-width .auth-container /
    margin: 20px auto 0; / Центрирование и отступ сверху /
    padding: 0 2.5rem; / Отступы по краям, как у .auth-container /
    box-sizing: border-box;
}
</style>






<script>
const renderTable = (headers, rows) => {
    let html = `<table>`;
    
    // Заголовки
    html += `<tr>${headers.map(h => `<th>${h}</th>`).join('')}</tr>`;
    
    // Строки
    rows.forEach(row => {
        html += `<tr>${row.map(cell => 
            `<td><div class="cell-content">${processCell(cell)}</div></td>`
        ).join('')}</tr>`;
    });
    
    return html + '</table>';
};



Telegram.WebApp.MainButton.onClick(function() {
    document.activeElement.blur();
});
</script>



<script>

Telegram.WebApp.MainButton.onClick(function() {
    document.activeElement.blur();
});

</script>










</head>





<script type="text/javascript">
    (function () {
      const tele = window.Telegram.WebApp;
      tele.ready()
      tele.expand();
     
      tele.SettingsButton.show();
      tele.setHeaderColor("#f8f9fa")
      tele.setBackgroundColor("#f8f9fa")
      tele.enableClosingConfirmation()
      tele.disableVerticalSwipes()
    })()
  </script>





<body>
    <div class="auth-container">
        <div class="header-wrapper">
            <h2>EMIIA.AI SIP<span class="beta"> βeta</span></h2>
            <div id="update-info"></div>
        </div>
        <form id="auth-form" onsubmit="auth(); return false;">
            <div class="input-group">
                <input type="text" id="login" name="username" placeholder="Email address" autocomplete="username" required>
            </div>
            <div class="input-group">
                <input type="password" id="password" name="password" placeholder="Password" autocomplete="current-password" required>
            </div>
            <p class="small"><a class="text-primary" href="mailto:emiia@emiia.ai">Забыли пароль?</a></p>
            <button type="submit">Вход</button>
        </form>
        <p>Нет аккаунта? <a href="mailto:emiia@emiia.ai"> Зарегистрироваться </a></p>
        <p>EMIIA.AI SIP — распределенная облачная платформа на основе ERP-системы с AI-агентами для совместной разработки цифровой экосистемы пространственного интеллекта.</p>
        
        <!-- Добавляем блок с иконками сюда, ниже формы -->
        <div class="icons-container">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="#d3d3d3" class="bi bi-github" viewBox="0 0 16 16">
  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
</svg>
        
            










        </div>




    </div>


    <script>
    // Загрузка сохранённых данных из localStorage
    window.onload = function() {
        const savedLogin = localStorage.getItem('savedLogin');
        const savedPassword = localStorage.getItem('savedPassword');
        if (savedLogin) document.getElementById('login').value = savedLogin;
        if (savedPassword) document.getElementById('password').value = savedPassword;
    };

    async function auth() {
        const login = document.getElementById('login').value;
        const password = document.getElementById('password').value;
        
        const response = await fetch('https://script.google.com/macros/s/AKfycbzh9sBQqxyBoyu71Ql1nA9Cqy13O0CA-CTo3QDP61zncUG4RizlABQbrB_ZXmqLyxum/exec', {
            method: 'POST',
            body: new URLSearchParams({ login, password })
        });
        
        if (await response.text() === 'OK') {
            // Сохранение данных в localStorage после успешной авторизации
            localStorage.setItem('savedLogin', login);
            localStorage.setItem('savedPassword', password);
            window.location.href = 'https://sos.emiia.ai/r9';
        } else {
            alert('Неверные учетные данные!');
        }
    }
    </script>













<script>

let rowHeights = {};

const saveRowHeights = () => {
    document.querySelectorAll('tr').forEach((tr, index) => {
        rowHeights[index] = tr.offsetHeight;
    });
};

const applySavedHeights = () => {
    document.querySelectorAll('tr').forEach((tr, index) => {
        if(rowHeights[index]) {
            tr.style.height = `${rowHeights[index]}px`;
        }
    });
};

// Вызывать перед обновлением данных
saveRowHeights();

// Вызывать после рендеринга таблицы
applySavedHeights();

</script>



<script type="text/javascript">
 
const data = JSON.stringify({
  eventType: 'web_app_setup_back_button',
  eventData: { is_visible: false },
});

window.external.notify(data);
 
 
    (function () {
      const tele = window.Telegram.WebApp;
      tele.ready()
      tele.expand();
      tele.BackButton.show();
      tele.SettingsButton.show();
      tele.setHeaderColor("#f8f9fa")
      tele.setBackgroundColor("#f8f9fa")
      tele.enableClosingConfirmation()
      tele.disableVerticalSwipes()
    })()
  </script>


          



  <script>

document.getElementById('search-input').addEventListener('blur', function() {
    this.blur(); // Снимает фокус с поля
    window.scrollTo(0, 0); // Опционально: скролл вверх
});

document.getElementById('search-input').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        this.blur(); // Скрывает клавиатуру при нажатии Enter
    }
});

  </script>




    <script src="https://telegram.org/js/telegram-web-app.js"></script>




<script>

Telegram.WebApp.MainButton.onClick(function() {
    document.activeElement.blur();
});

</script>

<script>
Telegram.WebApp.ready(function() {
    const input = document.getElementById('search-input');
    
    input.addEventListener('blur', function() {
        Telegram.WebApp.MainButton.hide(); // Скрываем кнопку, если есть
        document.activeElement.blur();
        window.focus();
    });

    input.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            input.blur();
            Telegram.WebApp.MainButton.hide();
        }
    });
});

</script>



<script>

Telegram.WebApp.ready(function() {
    const input = document.getElementById('search-input');
    
    function hideKeyboard() {
        input.blur();
        document.activeElement.blur();
        Telegram.WebApp.expand(); // Сворачивает клавиатуру
        setTimeout(() => window.focus(), 50);
    }

    input.addEventListener('blur', hideKeyboard);
    
    input.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            hideKeyboard();
        }
    });
});


</script>






</body>
</html>

